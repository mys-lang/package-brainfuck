from argparse import Parser
from string import StringReader
from os import TextFile
from . import execute
from os.tty import set_to_cbreak_mode

def main(argv: [string]):
    parser = Parser("brainfuck")
    parser.add_positional("source")
    args = parser.parse(argv)
    source = TextFile(args.value_of("source")).read()
    set_to_cbreak_mode(0)
    execute(source)
